
DROP TABLE IF EXISTS Opravnenia; 
CREATE TABLE Opravnenia(
meno VARCHAR (20) NOT NULL PRIMARY KEY,
heslo VARCHAR (20) NOT NULL,
prava INT NOT NULL
);


DROP TABLE IF EXISTS Zakaznik;
CREATE TABLE Zakaznik(
cisloOP		VARCHAR (8)	NOT NULL PRIMARY KEY,
meno VARCHAR (20) NOT NULL,
priezvisko VARCHAR (20) NOT NULL,
adresa VARCHAR (50),
telefon 	NUMERIC (20, 0) NOT NULL
);

DROP TABLE IF EXISTS Rezervacia;
CREATE TABLE Rezervacia(
cisloREZ BIGINT NOT NULL PRIMARY KEY  auto_increment,
cisloOP		VARCHAR (8) NOT NULL,
cisloIZ NUMERIC (3, 0) NOT NULL,
pocetL  NUMERIC (2, 0) NOT NULL,
datumR DATE NOT NULL,
dlzkaR NUMERIC (3, 0) NOT NULL
);

DROP TABLE IF EXISTS Pobyt;
CREATE TABLE Pobyt(
cisloP BIGINT PRIMARY KEY auto_increment,
cisloOP		VARCHAR (8) NOT NULL,
zaciatokP DATE NOT NULL,
trvanieP NUMERIC (3, 0) NOT NULL,
cisloIZ NUMERIC (3, 0) 
);


DROP TABLE IF EXISTS Platba;
CREATE TABLE Platba(
cisloPL BIGINT PRIMARY KEY auto_increment,
datumPL DATE NOT NULL,
suma NUMERIC (10, 0) NOT NULL,
sposobPL VARCHAR (20),
cisloOP		VARCHAR (8) NOT NULL,
cisloP NUMERIC (10, 0)
);


DROP TABLE IF EXISTS Izba;
CREATE TABLE Izba(
cisloIZ NUMERIC (3, 0) NOT NULL PRIMARY KEY,
pocetL  NUMERIC (2, 0) NOT NULL,
cena NUMERIC (7, 0) NOT NULL,
stav SMALLINT NOT NULL,
vybava VARCHAR (50)
);


DROP TABLE IF EXISTS ZahrnuteSL;
CREATE TABLE ZahrnuteSL(
cisloZS BIGINT NOT NULL PRIMARY KEY auto_increment,
cisloP NUMERIC (10, 0) NOT NULL,
cisloS NUMERIC (3, 0) 
);


DROP TABLE IF EXISTS Sluzby;
CREATE TABLE Sluzby(
cisloS NUMERIC (3, 0) NOT NULL PRIMARY KEY,
cena NUMERIC (5, 0) NOT NULL
);

INSERT INTO Opravnenia 
VALUES('root123','root123',1);
INSERT INTO Opravnenia 
VALUES('user123','user123',0);

INSERT INTO Zakaznik 
VALUES('PR546378','Peter','Reznik','Slovanskeho 56 Prievidza',00420908367468);
INSERT INTO Zakaznik 
VALUES('JB532587','Juraj','Burak','Riedka 28 Nitra',00420908347902);

INSERT INTO Sluzby 
VALUES(100,300);
INSERT INTO Sluzby 
VALUES(101,200);
INSERT INTO Sluzby 
VALUES(102,400);
INSERT INTO Sluzby 
VALUES(103,300);
INSERT INTO Sluzby 
VALUES(104,150);

INSERT INTO Izba 
VALUES(100,2,430,0,'zaklad');
INSERT INTO Izba 
VALUES(101,2,430,0,'zaklad');
INSERT INTO Izba 
VALUES(102,2,430,0,'zaklad');
INSERT INTO Izba 
VALUES(103,2,430,1,'zaklad');
INSERT INTO Izba 
VALUES(104,2,430,0,'zaklad');

INSERT INTO Rezervacia 
VALUES(NULL,'PR546378',104,2,'2009-3-30',7);
INSERT INTO Rezervacia 
VALUES(NULL,'JB532587',103,1,'2009-3-24',4);

INSERT INTO Pobyt 
VALUES(NULL,'PR546378','2009-02-22',10,102);
INSERT INTO Pobyt 
VALUES(NULL,'JB532587','2009-02-25',2,103);

INSERT INTO Platba 
VALUES(1,'2009-02-22',2650,'karta','PR546378',(SELECT cisloP FROM Pobyt WHERE cisloOP = 'PR546378' AND cisloIZ = 102 ));
INSERT INTO Platba 
VALUES(2,'2009-02-27',860,'hotovost','JB532587',(SELECT cisloP FROM Pobyt WHERE cisloOP = 'JB532587' AND cisloIZ = 103 ));



INSERT INTO ZahrnuteSL 
VALUES(1,(SELECT cisloP FROM Pobyt WHERE cisloOP = 'PR546378' AND cisloIZ = 102 ),100);
INSERT INTO ZahrnuteSL 
VALUES(2,(SELECT cisloP FROM Pobyt WHERE cisloOP = 'PR546378' AND cisloIZ = 102 ),103);
INSERT INTO ZahrnuteSL 
VALUES(3,(SELECT cisloP FROM Pobyt WHERE cisloOP = 'PR546378' AND cisloIZ = 102 ),102);

commit;